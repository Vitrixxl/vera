/**
  * Example de pseudo code pour ce qu'il y a faire 
 * POST /telegram-webhook
    body = JSON du Update Telegram
    chat_id = body.message.chat.id
    text    = body.message.text

    # 1. traiter le message
    reply_text = ma_fonction_de_traitement(text)

    # 2. renvoyer une r√©ponse au user :
    POST https://api.telegram.org/bot<TON_TOKEN>/sendMessage
         { "chat_id": chat_id, "text": reply_text }
 */

import { TelegramMessage, TelegramUpdate } from "@backend/types/telegram";
import Elysia from "elysia";
import { Telegraf } from "telegraf";
import z from "zod";

export const telegramRoutes = new Elysia({ prefix: "/webhook/telegram" }).post(
  "/",
  async ({ body }) => {
    const message = body.message as TelegramMessage;
    if (!message) {
      return;
    }
  },
  {
    body: z.object<TelegramUpdate>(),
  },
);

const bot = new Telegraf("");
bot.on("message", (ctx) => {});
